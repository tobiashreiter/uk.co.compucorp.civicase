angular.module('bw.paging',[]).directive('paging',function(){var a=/\{page\}/g;return{restrict:'EA',link:b,template:c,scope:{page:'=',pageSize:'=',total:'=',disabled:'@',dots:'@',ulClass:'@',activeClass:'@',disabledClass:'@',adjacent:'@',pagingAction:'&',pgHref:'@',textFirst:'@',textLast:'@',textNext:'@',textPrev:'@',textFirstClass:'@',textLastClass:'@',textNextClass:'@',textPrevClass:'@',textTitlePage:'@',textTitleFirst:'@',textTitleLast:'@',textTitleNext:'@',textTitlePrev:'@'}};function b(_,B,C){_.$watchCollection('[page,pageSize,total,disabled]',function(){m(_,C)})}function c(_a,_b){return '<nav role="navigation" aria-label="Pagination Navigation">'+'<ul data-ng-hide="Hide" data-ng-class="ulClass"> '+'<li '+'title="{{Item.title}}" '+'data-ng-class="Item.liClass" '+'data-ng-repeat="Item in List"> '+'<a '+(_b.pgHref?'data-ng-href="{{Item.pgHref}}" ':'href ')+'aria-label="Go to {{Item.title}}" '+'data-ng-class="Item.aClass" '+'data-ng-click="Item.action()" '+'data-ng-bind="Item.value">'+'</a> '+'</li>'+'</ul>'+'</nav>'}function d(D,_B){D.List=[];D.Hide=!1;D.page=parseInt(D.page)||1;D.total=parseInt(D.total)||0;D.adjacent=parseInt(D.adjacent)||2;D.pgHref=D.pgHref||'';D.dots=D.dots||'...';D.ulClass=D.ulClass||'pagination';D.activeClass=D.activeClass||'active';D.disabledClass=D.disabledClass||'disabled';D.textFirst=D.textFirst||'<<';D.textLast=D.textLast||'>>';D.textNext=D.textNext||'>';D.textPrev=D.textPrev||'<';D.textFirstClass=D.textFirstClass||'';D.textLastClass=D.textLastClass||'';D.textNextClass=D.textNextClass||'';D.textPrevClass=D.textPrevClass||'';D.textTitlePage=D.textTitlePage||'Page {page}';D.textTitleFirst=D.textTitleFirst||'First Page';D.textTitleLast=D.textTitleLast||'Last Page';D.textTitleNext=D.textTitleNext||'Next Page';D.textTitlePrev=D.textTitlePrev||'Previous Page';D.hideIfEmpty=e(D,_B.hideIfEmpty);D.showPrevNext=e(D,_B.showPrevNext);D.showFirstLast=e(D,_B.showFirstLast);D.scrollTop=e(D,_B.scrollTop);D.isDisabled=e(D,_B.disabled)}function e(_A,E){return angular.isDefined(E)?!!_A.$parent.$eval(E):!1}function f(aA,aB){aA.page>aB&&(aA.page=aB);aA.page<=0&&(aA.page=1);aA.adjacent<=0&&(aA.adjacent=2);aB<=1&&(aA.Hide=aA.hideIfEmpty)}function g(aC,aD){if(aC.page==aD)return;if(aC.isDisabled)return;aC.page=aD;aC.pagingAction({page:aC.page,pageSize:aC.pageSize,total:aC.total});aC.scrollTop&&scrollTo(0,0)}function h(aE,aF,_c){if((!aE.showPrevNext&&!aE.showFirstLast)||aF<1)return;var _d,_e,F;if(_c=='prev'){_d=aE.page-1<=0;var G=aE.page-1<=0?1:aE.page-1;aE.showFirstLast&&(_e={value:aE.textFirst,title:aE.textTitleFirst,aClass:aE.textFirstClass,page:1});aE.showPrevNext&&(F={value:aE.textPrev,title:aE.textTitlePrev,aClass:aE.textPrevClass,page:G})}else{_d=aF<aE.page+1;var H=aF<=aE.page+1?aF:aE.page+1;aE.showPrevNext&&(_e={value:aE.textNext,title:aE.textTitleNext,aClass:aE.textNextClass,page:H});aE.showFirstLast&&(F={value:aE.textLast,title:aE.textTitleLast,aClass:aE.textLastClass,page:aF})}var I=function(aG,aH){return{title:aG.title,aClass:aG.aClass,value:aG.aClass?'':aG.value,liClass:aH?aE.disabledClass:'',pgHref:aH?'':aE.pgHref.replace(a,aG.page),action:function(){!aH&&g(aE,aG.page)}}};aE.isDisabled&&(_d=!0);if(_e){var J=I(_e,_d);aE.List.push(J)}if(F){var K=I(F,_d);aE.List.push(K)}}function A(aI,aJ,_C){var i=0;for(i=aI;i<=aJ;i++){var _E=_C.pgHref.replace(a,i),_f=_C.page==i?_C.activeClass:'';_C.isDisabled&&(_E='',_f=_C.disabledClass);_C.List.push({value:i,title:_C.textTitlePage.replace(a,i),liClass:_f,pgHref:_E,action:function(){g(_C,this.value)}})}}function j(aK){aK.List.push({value:aK.dots,liClass:aK.disabledClass})}function k(aL,aM){A(1,2,aL);aM!=3&&j(aL)}function l(aN,aO,aP){aP!=aN-2&&j(aO);A(aN-1,aN,aO)}function m(aQ,aR){!aQ.pageSize||aQ.pageSize<=0&&(aQ.pageSize=1);var aS=Math.ceil(aQ.total/aQ.pageSize),_F=(aQ.adjacent*2)+2;d(aQ,aR);f(aQ,aS);var _D,aT;h(aQ,aS,'prev');if(aS<=(_F+2)){_D=1;A(_D,aS,aQ)} else if(aQ.page-aQ.adjacent<=2){_D=1;aT=1+_F;A(_D,aT,aQ);l(aS,aQ,aT)}else aQ.page<aS-(aQ.adjacent+2)?(_D=aQ.page-aQ.adjacent,aT=aQ.page+aQ.adjacent,k(aQ,_D),A(_D,aT,aQ),l(aS,aQ,aT)):(_D=aS-_F,aT=aS,k(aQ,_D),A(_D,aT,aQ));h(aQ,aS,'next')}});
